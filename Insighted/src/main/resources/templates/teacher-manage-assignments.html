<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment Management - InsightEd Platform</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<!-- Sidebar -->
<div th:insert="teacher-sidebar.html"></div>

<!-- Main Content -->
<main class="main-content">
    <!-- Hidden elements for flash messages -->
    <div id="flashMessage" th:if="${message}" th:text="${message}" style="display: none;"></div>
    <div id="flashMessageType" th:if="${messageType}" th:text="${messageType}" style="display: none;"></div>
    <!-- Assignment Management Section -->
    <section id="assignments-section" class="dashboard-section">
        <div class="flex justify-between items-center mb-4">
            <h1>Assignment Management</h1>
            <button class="btn btn-primary" id="createAssignmentBtn">‚ûï Create New Assignment</button>
        </div>

        <!-- Assignment Creation Form -->
        <div id="assignmentForm" class="card mb-4" style="display: none;">
            <div class="card-header">
                <h3 class="card-title">Create New Assignment</h3>
                <p class="card-description">Fill out the details below to create a new assignment for your students.</p>
            </div>

            <form id="newAssignmentForm" th:action="@{/teacher/create-assignment}" method="post">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div class="form-group">
                        <label for="assignmentTitle" class="form-label">Assignment Title</label>
                        <input type="text" id="assignmentTitle" name="assignmentTitle" class="form-input" placeholder="e.g., Essay on Machine Learning" required>
                    </div>

                    <div class="form-group">
                        <label for="assignmentCourse" class="form-label">Course</label>
                        <input type="text" id="assignmentCourse" name="course" class="form-input" placeholder="Enter Course Name" required>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div class="form-group">
                        <label for="assignmentType" class="form-label">Assignment Type</label>
                        <select id="assignmentType" name="assignmentType" class="form-select" required>
                            <option value="">Select type</option>
                            <option value="essay">Essay</option>
                            <option value="project">Project</option>
                            <option value="report">Report</option>
                            <option value="lab">Lab Assignment</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="assignmentPoints" class="form-label">Total Points</label>
                        <input type="number" id="assignmentPoints" name="totalPoints" class="form-input" placeholder="100" min="1" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="assignmentDueDate" class="form-label">Due Date</label>
                        <input type="datetime-local" id="assignmentDueDate" name="dueDate" class="form-input" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="assignmentDescription" class="form-label">Assignment Description</label>
                    <textarea id="assignmentDescription" name="assignmentDescription" class="form-input" rows="4" placeholder="Provide detailed instructions for the assignment..." required></textarea>
                </div>


                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="allowLateSubmission"  style="margin: 0;">
                        <span>Allow Late Submissions</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="sendNotification"  checked style="margin: 0;">
                        <span>Send Notification to Students</span>
                    </label>
                </div>

                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <button type="button" class="btn btn-ghost" id="cancelAssignmentBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Assignment</button>
                </div>
            </form>
        </div>

        <!-- Assignment Statistics -->
        <div class="features-grid mb-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üìù Total Assignments</h3>
                    <p class="card-description">This semester</p>
                </div>
                <div style="font-size: 2rem; font-weight: 700; color: var(--primary-blue);" th:text="${totalAssignments}">24</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚è≥ Active Assignments</h3>
                    <p class="card-description">Currently open</p>
                </div>
                <div style="font-size: 2rem; font-weight: 700; color: var(--success);" th:text="${totalAssignments}">8</div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚è∞ Due This Week</h3>
                    <p class="card-description">Upcoming deadlines</p>
                </div>
                <div style="font-size: 2rem; font-weight: 700; color: var(--warning);" th:text="${dueThisWeek}">3</div>
            </div>
        </div>

        <!-- Assignment List -->
        <div class="table-container">
            <div style="padding: 1.5rem; border-bottom: 1px solid var(--gray-200); display: flex; justify-content: space-between; align-items: center;">
                <h3>Assignment List</h3>
            </div>
            <table class="table">
                <thead>
                <tr>
                    <th>Assignment</th>
                    <th>Course</th>
                    <th>Type</th>
                    <th>Due Date</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="assignment : ${assignments}">
                    <td>
                        <div>
                            <div style="font-weight: 600;" th:text="${assignment.assignmentTitle}">Essay on Machine Learning</div>
                            <div style="font-size: 0.875rem; color: var(--gray-500);" th:text="${assignment.assignmentDescription}">Analysis of ML concepts and applications</div>
                        </div>
                    </td>
                    <td th:text="${assignment.course}">CS 101</td>
                    <td th:text="${assignment.assignmentType}">Essay</td>
                    <td th:text="${#temporals.format(assignment.dueDate, 'MMM dd, yyyy h:mm a')}">Sep 15, 2025 5:41 PM</td>
                    <td>
                        <button class="btn btn-ghost" style="padding: 0.375rem 0.75rem; font-size: 0.875rem;">Edit</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</main>

<!-- Footer -->
<div th:insert="teacher-footer.html"></div>

<script th:src="@{/scripts/script.js}"></script>
<script>
    // Check for flash messages and show notifications
    document.addEventListener('DOMContentLoaded', function() {
        const messageElement = document.getElementById('flashMessage');
        const messageTypeElement = document.getElementById('flashMessageType');

        if (messageElement && messageTypeElement) {
            const message = messageElement.textContent;
            const messageType = messageTypeElement.textContent;

            if (message && message.trim() !== '') {
                showNotification(message, messageType);
            }
        }
    });
</script>
</body>

</html>
